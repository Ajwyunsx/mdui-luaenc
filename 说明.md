# 使用说明（LuaObEnc）

本文件面向中文用户，简要说明网页端混淆器的关键功能、推荐设置与验证方法。

## 功能概览
- 字符串与数字加密：常量字符串、整型数字多样化编码处理。
- 控制流与逻辑混淆：插入可控的结构扰动，降低静态逆向可读性。
- 函数名与内置别名：函数定义与常用调用名可重命名/别名化（可配置白名单）。
- 反调试与花指令：可选快速增加调试成本与噪音代码。
- 环境封装：`load/IIFE 包裹`、`整段编码封装`、`网页标准前导`。
- 尾部停止（防插入保护）：软/硬两种尾部保护策略，防止末尾追加代码执行。

## 尾部停止（防插入保护）
- 硬停止（编译阻断）：在输出末尾追加顶层 `return`，使后续插入代码导致编译错误。
- 软停止（运行时提前返回）：在末尾追加 `do return end`，编译通过但运行时直接返回，不执行后续插入。
- 当启用 `load/IIFE 包裹` 或 `整段编码封装` 时，最外层已是 `return (function(...) ... end)()`，天然“硬停止”，不会重复追加尾部保护以避免语法冲突。

## 推荐设置
- 更强防护：启用 `load/IIFE 包裹` 或 `整段编码封装`，并保持“尾部停止（硬停止或软停止）”开启。
- 兼容性：`numberBaseStyle=tonumber` 兼容更广；LuaJIT/5.3环境建议开启“字符串加密/数字加密/内置别名”。
- 一行压缩：`oneLine` 会将代码压缩成单行，便于硬停分号衔接与空间扰动。

## 快速验证
1. 生成混淆结果后，在文件末尾追加 `print("injected")`。
2. 硬停止：使用 `luac53` 编译应报错；软停止：可编译但运行时不会打印。
3. 启用包裹：末尾顶层 `return` 已提供硬阻断效果。

## 网页使用步骤
1. 左侧勾选需要的混淆项与环境封装；必要时设置“尾部停止风格”。
2. 在“源代码”输入框粘贴 Lua 脚本。
3. 点击“混淆加密”获得结果；可复制或点击“下载结果”。
4. 点击工具栏“帮助”按钮，查看弹窗说明与建议。

## 注意事项
- 不建议在运行时依赖危险入口（如 `loadstring`）执行未知输入。
- 在 AndLua 等环境请将 `require/import` 语句置于加密范围外或打包依赖。
- 若输出与目标环境报语法错误，多为顶层 `return` 位置或注入分隔符问题，请尝试关闭包裹或切换尾部停止风格并重新生成。

## 许可与贡献
- 详见仓库 `LICENSE`。
- 欢迎提交 Issue/PR 改进混淆策略与兼容性。