# Lua代码混淆加密工具

一个基于Web的Lua代码混淆加密工具，采用mdui1.0风格设计，支持多种混淆技术和Lua环境版本。

## 功能特点

### 核心混淆功能
1. **控制流结构混淆** - 添加无用的条件分支，打乱代码执行流程
2. **代码逻辑流程混淆** - 插入无用的循环和计算，增加代码复杂性
3. **局部变量命名混淆** - 将局部变量名替换为随机生成的标识符
4. **全局变量加密处理** - 对全局变量进行加密处理
5. **字符串加密保护** - 使用XOR算法加密字符串常量
6. **数字加密转换** - 将数字常量转换为复杂表达式
7. **表结构加密处理** - 对表构造器进行包装处理
8. **布尔值混淆变换** - 将true/false转换为等价表达式
9. **空值混淆处理** - 对nil值进行混淆处理
10. **跳转语句混淆优化** - 对goto语句进行包装处理
11. **花指令植入机制** - 插入无用的函数和变量

### 支持的Lua环境
- 标准Lua 5.0至5.4版本
- GGLua环境
- AndLua开发环境
- LuaJIT即时编译环境

### AndLua特殊处理
AndLua系统通过源代码中的require和import语句实现库文件自动导入，在加密AndLua项目时，工具提供以下选项：
- 将所有引入语句（require和import）提取至加密范围外
- 手动将相关库文件打包至应用安装包中

## 使用方法

1. 在左侧选择需要的混淆选项
2. 选择目标Lua环境版本
3. 在源代码区域输入Lua代码
4. 点击"混淆加密"按钮
5. 在结果区域查看混淆后的代码
6. 可选择复制结果或下载为文件

## 技术实现

### 混淆算法
- **变量混淆**：使用随机生成的标识符替换原始变量名，确保不与Lua关键字冲突
- **字符串加密**：采用XOR加密算法，配合随机密钥保护字符串内容
- **数字混淆**：将数字常量转换为等价的复杂表达式
- **控制流混淆**：插入无用的条件分支和循环，打乱代码执行流程
- **结构混淆**：对表构造器、布尔值和nil值进行等价替换

### 兼容性保证
- 保留Lua关键字和内置函数名不被混淆
- 确保混淆后的代码语法正确，能够被Lua解释器正确解析
- 针对不同Lua版本进行适配，确保兼容性
- AndLua特殊处理确保库文件导入不受影响

## 文件结构
```
mdui-lua-obfuscator/
├── index.html          # 主页面
├── styles.css          # 自定义样式
├── lua-obfuscator.js   # 混淆算法核心
├── app.js              # 应用程序主逻辑
└── README.md           # 项目说明文档
```

## 注意事项

1. 混淆后的代码可能会增加执行开销，特别是在启用花指令植入时
2. 建议在混淆前备份原始代码，以便后续维护
3. 对于AndLua项目，确保正确处理require和import语句
4. 混淆后的代码可读性会大幅降低，这是正常现象

## 技术栈
- HTML5
- CSS3 (mdui 1.0)
- JavaScript (ES6+)
- 无需后端支持，纯前端实现

## 许可证
本项目采用MIT许可证，详见LICENSE文件。